(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d2a6204"],{"130b":function(e,t,n){"use strict";var s=n("4120"),o=n.n(s);o.a},2017:function(e,t,n){"use strict";var s=n("b12d"),o=n.n(s);o.a},4120:function(e,t,n){},"9ed6":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[n("div",{staticClass:"title-container"},[n("h3",{staticClass:"title"},[e._v("Tixon Console")])]),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),n("el-input",{ref:"username",attrs:{placeholder:"请输入账号",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),n("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"请输入密码",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e._v(" "),n("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[n("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),e._v(" "),n("el-form-item",{staticClass:"yzm",attrs:{prop:"num"}},[n("span",{staticClass:"el-icon-chat-dot-square",staticStyle:{color:"#889aa4","padding-left":"15px"}}),e._v(" "),n("el-input",{ref:"num",attrs:{placeholder:"请输入验证码",name:"num",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.num,callback:function(t){e.$set(e.loginForm,"num",t)},expression:"loginForm.num"}}),e._v(" "),n("el-button",{attrs:{loading:e.yzmLoading,disabled:e.yzmBtnDisabled},on:{click:e.getYzCode}},[e._v(e._s(e.yzmTime))])],1),e._v(" "),n("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登录")])],1)],1)},o=[],a=(n("61f7"),n("c24f")),r=(n("5f87"),{name:"Login",data:function(){var e=function(e,t,n){var s=/^1[3-9]\d{9}$/,o=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;-1===t.indexOf("@")?s.test(t)?n():n(new Error("用户名格式不正确,请用手机号或者是邮箱来作为用户名")):o.test(t)?n():n(new Error("用户名格式不正确,请用手机号或者是邮箱来作为用户名"))};return{yzmTime:"获取验证码",yzmBtnDisabled:!1,yzmLoading:!1,loginForm:{username:"",password:"",num:""},loginRules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}],num:[{required:!0,trigger:"blur",message:"验证码不能为空"}]},loading:!1,passwordType:"password",redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},mounted:function(){},methods:{getYzCode:function(){var e=this;this.$refs.loginForm.validateField("username",(function(t){t?e.$message({message:"账号不合法,请检查",type:"error"}):(e.yzmLoading=!0,Object(a["s"])({username:e.loginForm.username}).then((function(t){if(e.yzmLoading=!1,0===t.statusCode){e.yzmBtnDisabled=!0;var n=59;e.yzmTime=60;var s=setInterval((function(){e.yzmTime=n--,e.yzmTime<=0&&(e.yzmTime="重新获取验证码",e.yzmBtnDisabled=!1,clearTimeout(s))}),1e3);e.$message({message:"验证码发送成功,请注意查收",type:"success"})}})).catch((function(){e.yzmLoading=!1})))}))},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(){e.$router.push({path:e.redirect||"/"}),e.loading=!1})).catch((function(){e.loading=!1}))}))}}}),i=r,l=(n("2017"),n("130b"),n("2877")),c=Object(l["a"])(i,s,o,!1,null,"6ba4a99f",null);t["default"]=c.exports},b12d:function(e,t,n){}}]);